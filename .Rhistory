install.packages("e1071")
lirary("e1071")
library("e1071")
getwd()
library(data.table)
docs_alvaras = fread("Documentos/Semantix/alvaras/doc_alvara.csv", sep = "|", header = F)
View(docs_alvaras)
table(docs_alvaras[V2])
table(docs_alvaras[.V2])
table(docs_alvaras[,.V2])
table(docs_alvaras['V2'])
table(docs_alvaras[='V2'])
table(docs_alvaras[, V2])
docs_alvaras = docs_alvaras[, V2 == "sim"]
docs_alvaras = fread("Documentos/Semantix/alvaras/doc_alvara.csv", sep = "|", header = F)
docs_alvaras[, V2 == "sim"]
docs_alvaras[, V2 := "sim"]
View(docs_alvaras)
docs_alvaras = fread("Documentos/Semantix/alvaras/doc_alvara.csv", sep = "|", header = F)
docs_alvaras[docs_alvaras[, V2 == "sim"]]
docs_finais = docs_alvaras[docs_alvaras[, V2 == "sim"]]
View(docs_alvaras)
View(docs_finais)
duplicated(docs_finais[, V1])
table(duplicated(docs_finais[, V1]))
docs_finais = docs_finais[!duplicated(docs_finais$V1), ]
table(duplicated(docs_finais[, V1]))
docs_finais[,filename_sem_ext:=gsub(".*/.*/","",V1)]
View(docs_finais)
table(duplicated(docs_finais$filename_sem_ext))
docs_finais = docs_finais[!duplicated(docs_finais$filename_sem_ext), ]
docs_finais$filename_sem_ext <- NULL
View(docs_finais)
alvaras = fread("Documentos/Semantix/alvaras/2019-06-21 17_52_52.685066.csv", sep = ";", header = F)
View(alvaras)
alvaras = alvaras[alvaras[, V1 == docs_finais[, V1]]]
alvaras = fread("Documentos/Semantix/alvaras/2019-06-21 17_52_52.685066.csv", sep = ";", header = F)
alvaras = alvaras[alvaras[, docs_finais[, V1]]]
resultado = merge(alvaras, docs_finais,
by = "V1",
all.x = T, all.y = F)
View(resultado)
resultado$V2.y <- NULL
View(resultado)
resultado = merge(docs_finais, alvaras,
by = "V1",
all.x = T, all.y = F)
View(resultado)
resultado$V2.x <- NULL
View(resultado)
10690 - 10335
10690 - 355
View(resultado)
View(docs_finais)
View(docs_alvaras)
View(docs_finais)
View(resultado)
View(docs_alvaras)
View(docs_finais)
View(resultado)
resultado[,filename_sem_ext:=gsub(".*/.*/","",V1)]
View(resultado)
table(duplicated(resultado$filename_sem_ext))
resultado = resultado[!duplicated(resultado$filename_sem_ext), ]
resultado$filename_sem_ext <- NULL
View(resultado)
table(duplicated(resultado$V1))
write.table(resultado, "Documentos/Semantix/alvaras/alvaras_2019-06-26.csv", sep="|", quote = F, row.names = F, na = "")
write.table(resultado, "Documentos/Semantix/alvaras/alvaras_2019-06-26.csv", sep="|", quote = F, row.names = F, col.names = F, na = "")
alvaras = fread("Documentos/Semantix/alvaras/2019-06-21 17_52_52.685066.csv", sep = ";", header = F, colClasses = "character")
alvaras = alvaras[alvaras[, V1 == docs_finais[, V1]]]
alvaras = fread("Documentos/Semantix/alvaras/2019-06-21 17_52_52.685066.csv", sep = ";", header = F, colClasses = "character")
resultado = merge(docs_finais, alvaras,
by = "V1",
all.x = T, all.y = F)
resultado[,filename_sem_ext:=gsub(".*/.*/","",V1)]
table(duplicated(resultado$filename_sem_ext))
resultado = resultado[!duplicated(resultado$filename_sem_ext), ]
resultado$filename_sem_ext <- NULL
write.table(resultado, "Documentos/Semantix/alvaras/alvaras_2019-06-26.csv", sep="|", quote = F, row.names = F, col.names = F, na = "")
rm(list=ls())
##################################################################################################################
alvaras = fread("Documentos/Semantix/alvaras/alvaras_2019-06-26.csv", sep = "|", header = F, colClasses = "character")
View(alvaras)
##################################################################################################################
alvaras = fread("Documentos/Semantix/alvaras/alvaras_2019-06-26.csv", sep = "|", header = F, colClasses = "character")
View(alvaras)
preds_layout = fread("Documentos/Semantix/alvaras/preds_layout.csv", sep = ",", header = F, colClasses = "character")
View(preds_layout)
preds_layout = fread("Documentos/Semantix/alvaras/preds_layout.csv", sep = ",", colClasses = "character")
View(preds_layout)
preds_alvaras = fread("Documentos/Semantix/alvaras/preds_alvara.csv", sep = ",", colClasses = "character")
View(preds_alvaras)
View(alvaras)
View(preds_alvaras)
View(preds_layout)
preds_alvaras = fread("Documentos/Semantix/alvaras/preds_alvara.csv", sep = "|", colClasses = "character")
View(preds_alvaras)
View(preds_layout)
View(preds_alvaras)
View(alvaras)
View(preds_layout)
View(preds_layout)
View(preds_alvaras)
alvaras[,filename_sem_ext:=gsub(".*/.*/","",V1)]
preds_layout[,filename_sem_ext:=gsub(".*/.*/","",filename)]
preds_alvaras[,filename_sem_ext:=gsub(".*/.*/","",file_name)]
View(preds_layout)
View(preds_alvaras)
View(alvaras)
alvaras$V1 <- NULL
View(alvaras)
alvaras$V2 <- NULL
alvaras$V3 <- NULL
alvaras$V4 <- NULL
alvaras$V5 <- NULL
alvaras$V6 <- NULL
alvaras$V7 <- NULL
alvaras$V8 <- NULL
alvaras$V9 <- NULL
alvaras$V10 <- NULL
alvaras$V11 <- NULL
alvaras$V12 <- NULL
alvaras$V13 <- NULL
View(alvaras)
alvaras$V14 <- NULL
View(preds_alvaras)
preds_alvaras$company <- NULL
preds_alvaras$bucket <- NULL
preds_alvaras$process_id <- NULL
preds_alvaras$doc_type_re <- NULL
preds_alvaras$confidence_type_re <- NULL
preds_alvaras$doc_type_ml <- NULL
preds_alvaras$timestamp <- NULL
View(preds_alvaras)
preds_alvaras$doc_quality_ml <- NULL
preds_alvaras$confidence_quality_ml <- NULL
View(preds_alvaras)
resultado_primeiro_preds = merge(alvaras, preds_alvaras,
by = "filename_sem_ext",
all.x = T, all.y = F)
View(resultado_primeiro_preds)
table(duplicated(resultado_primeiro_preds$file_name))
View(resultado_primeiro_preds)
preds_layout$bucket <- NULL
preds_layout$company <- NULL
resultado_segundo_preds = merge(alvaras, preds_layout,
by = "filename_sem_ext",
all.x = T, all.y = F)
View(resultado_segundo_preds)
sum(is.na(resultado_segundo_preds$layout))
table(duplicated(resultado_segundo_preds$filename))
table(duplicated(resultado_segundo_preds$filename_sem_ext))
table(duplicated(resultado_primeiro_preds$filename_sem_ext))
resultado_primeiro_preds = resultado_primeiro_preds[!duplicated(resultado_primeiro_preds$filename_sem_ext), ]
resultado_segundo_preds = resultado_segundo_preds[!duplicated(resultado_segundo_preds$filename_sem_ext), ]
View(resultado_segundo_preds)
resultado_final = merge(resultado_primeiro_preds, resultado_segundo_preds,
by = "filename_sem_ext",
all.x = T, all.y = T)
View(resultado_final)
table(duplicated(resultado_final$filename_sem_ext))
table(duplicated(resultado_final$file_name))
table(duplicated(resultado_final$filename))
resultado_final$file_name <- NULL
View(resultado_final)
resultado_final$filename_sem_ext <- NULL
View(resultado_final)
View(resultado_final)
resultado_final = resultado_final[,c(2, 1, 3, 4, 5, 6, 7, 8, 9)]
View(resultado_final)
View(resultado_final)
write.table(resultado, "Documentos/Semantix/alvaras/alvaras_confiabilidade_2019-06-26.csv", sep="|", quote = F, row.names = F, na = "")
write.table(resultado_final, "Documentos/Semantix/alvaras/alvaras_confiabilidade_2019-06-26.csv", sep="|", quote = F, row.names = F, na = "")
View(preds_alvaras)
View(preds_layout)
setwd("Documentos/mestrado/")
